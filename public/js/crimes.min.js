/*!
 * Start Bootstrap - SB Admin 2 v4.0.3 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$(document).ready(function(){var c;function t(t,e,a){var r={labels:Object.keys(t),datasets:[{label:"Crime Reported",data:Object.values(t),backgroundColor:[],borderColor:[],borderWidth:.5}]},s={title:{display:!1,position:"top",text:"Crime Stats Totals for the Month",fontSize:18,fontColor:"#111"},legend:{display:!1,position:"bottom"},scales:{xAxes:[{gridLines:{display:!1},ticks:{autoSkip:!1},scaleLabel:{display:!1,labelString:"Crime Type"}}],yAxes:[{ticks:{min:0},scaleLabel:{display:!0,labelString:"Total Occurance"},gridLines:{display:!1}}]}},l=$("#bar-chartcanvas");if(a){Object.keys(t).forEach(function(e){t[e]<50&&(delete t[e],delete e)});var o=Object.keys(t).map(function(e){return{key:e,value:this[e]}},t);o.sort(function(e,t){return t.value-e.value});o.slice(0,10);var i=o.slice(0,10).reduce(function(e,t){return e[t.key]=t.value,e},{});c.data.datasets[0].data=Object.values(i);for(var n=[],d=0;d<Object.keys(i).length;d++)n.push("rgba(65, 131, 215, 1)");c.data.datasets[0].backgroundColor=n,c.options.title.text=s.title.text;for(d=0;d<Object.keys(i).length;d++)c.data.labels[d]=Object.keys(i)[d];c.update()}else c=new Chart(l,{type:"bar",data:r,options:s})}first_date="04/[0-9]+/2019",$(".loader-container").addClass("loader"),$.ajax({method:"GET",url:"/crime",data:{date:first_date}}).then(function(e){t(e,first_date,!0);$(".loader-container").removeClass("loader")}),$("#bar-chartcanvas"),t({ASSAULT:0,BATTERY:0,NARCOTICS:0,"CRIMINAL DAMAGE":0,"OTHER OFFENSE":0,HOMICIDE:0})});